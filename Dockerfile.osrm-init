FROM ghcr.io/project-osrm/osrm-backend:latest

# Install required tools for preprocessing
RUN apk add --no-cache \
    bash \
    curl \
    ca-certificates

WORKDIR /data

# Create preprocessing script
COPY scripts/osrm-init-entrypoint.sh /usr/local/bin/osrm-init
RUN chmod +x /usr/local/bin/osrm-init

CMD ["/usr/local/bin/osrm-init"]
